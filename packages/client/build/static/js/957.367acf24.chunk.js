"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[957],{883:function(n,e,t){t.r(e),t.d(e,{default:function(){return cn}});var i,o,a,r,s,c,d,l,u,p,m,f,x,h=t(1413),g=t(4165),v=t(5861),w=t(9439),Z=t(1479),b=t(890),j=t(7533),k=t(6151),y=t(2791),S=t(2913),C=t(1817),P=t(168),B=t(6934),_=t(9479),z=(0,B.ZP)("div")((function(n){var e=n.idSalon,t=n.theme,i=n.isComment;return"\n  padding-left: ".concat(i?"45vw":"",";\n  padding-top: 4vh;\n  width: 65vw;\n  border-radius: 16px;\n  margin-bottom: 4vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: left;\n     background-color: ").concat(1===e?t.palette.colorRed.main:2===e?t.palette.secondary.main:t.palette.colorBlue.main,";\n  \n")})),I=(0,B.ZP)("img")(i||(i=(0,P.Z)(["\n  width: 20vw;\n  text-align: left;\n"]))),R=(0,B.ZP)("div")(o||(o=(0,P.Z)(["\n  width: 20vw;\n  padding-top: 1vh;\n  text-align: left;\n  word-wrap: break-word;\n"]))),E=((0,B.ZP)(_.k)(a||(a=(0,P.Z)(["\n  width: 7vw;\n  text-align: left;\n  border: none;\n"]))),(0,B.ZP)("div")(r||(r=(0,P.Z)(["\n  text-align: left;\n"])))),A=t(4499),W=function(n){var e=n.dataBlock,t=n.idSalon,i=n.isComment,o=void 0!==i&&i;return(0,A.jsxs)(z,{idSalon:t,isComment:o,children:[(0,A.jsx)(E,{children:(0,A.jsxs)(b.Z,{variant:"h6",children:[o?"":"\u2116 ".concat(e.id," | ")," ",e.time," ",e.prenom]})}),(0,A.jsx)(R,{children:(0,A.jsxs)(b.Z,{variant:"h6",children:[" ",e.message]})}),(0,A.jsx)(I,{src:e.media})]})},q=t(3239),D=t(5021),L=t(9012),M=t(3400),O=t(292),T=t(4027),J=t(5552),K=function(){var n=new Date,e=n.toLocaleDateString(),t=n.getHours(),i=n.getMinutes();n.getSeconds();return"".concat(e," ").concat(t,":").concat(i)},V=t(4272),F=t(5750),H=((0,V.ZF)({apiKey:"AIzaSyCNgEzCAJlnlRHVoi21OXJgzWl13wqKSCg",authDomain:"assofactory-b7f0b.firebaseapp.com",projectId:"assofactory-b7f0b",storageBucket:"assofactory-b7f0b.appspot.com",messagingSenderId:"528163036489",appId:"1:528163036489:web:a0af3a6f172a6d8c6bce98",measurementId:"G-JKG8WC2ZV7"}),(0,F.cF)()),G=t(5717),N=(t(3037),t(8688),t.p+"static/media/YogaCarousel.266ce270defec5804f13.jpg"),Y=t.p+"static/media/StrongWomenCarousel.9aa01ff35e93e63a7b4f.jpg",U=t.p+"static/media/DetenteCarousel.b33a1b85d126dcb36200.jpg",X=t.p+"static/media/StripPlasticCarousel.831f0f3914e70c363461.jpg",Q=t(6278),$=(0,B.ZP)("div")(s||(s=(0,P.Z)(["\n  padding-bottom: 10rem;\n  /* padding-top: 10rem; */\n  text-align: center;\n  width: 100vw;\n  /* height: 100vh; */\n  background-color: ",";\n"])),(function(n){return n.theme.palette.colorOrangeBlog.main})),nn=(0,B.ZP)("div")((function(n){var e=n.idSalon,t=n.theme;return"\n  width: 80%;\n  margin-left: 12vw;\n  border: solid 3px;\n  border-radius: 20px;\n  box-shadow: 5px 14px 12px 4px #00000080;\n\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-between;\n  /* padding-top: 4vh; */\n\n  background-color: ".concat(1===e?t.palette.colorRed.main:2===e?t.palette.secondary.main:t.palette.colorBlue.main,";\n\n  @media (max-width: 750px) {\n    // width: 100%;\n  }\n")})),en=(0,B.ZP)("div")((function(n){var e=n.idSalon,t=n.theme;return"\n  width: 80%;\n  margin-left: 12vw;\n  margin-top: 4vh;\n  height: 15vh;\n  box-shadow: 5px 14px 12px 4px #00000080;\n  background-color: ".concat(1===e?t.palette.colorRed.main:2===e?t.palette.secondary.main:t.palette.colorBlue.main,";\n  display: flex;\n  justify-content: space-evenly;\n  align-items: center;\n  border: solid 1px;\n  border-radius: 20px;\n\n  .icon {\n    transform: rotate(-40deg);\n  }\n\n  @media (max-width: 750px) {\n    // width: 100%;\n  }\n")})),tn=((0,B.ZP)("div")(c||(c=(0,P.Z)(["\n  background-color: ",";\n  padding: 4vh;\n  width: 70%;\n  height: 50vh;\n\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr 1fr;\n  justify-items: center;\n\n  border-radius: 16px;\n  box-shadow: 0px 4px 4px grey;\n  margin-bottom: 4vh;\n\n  @media (max-width: 750px) {\n    width: 100%;\n  }\n"])),(function(n){return n.theme.palette.colorOrangeBlog.main})),(0,B.ZP)("img")(d||(d=(0,P.Z)(['\n  width: 80%;\n  font-family: "Alkatra", cursive;\n  grid-column: 1;\n  grid-row: 1;\n']))),(0,B.ZP)("div")(l||(l=(0,P.Z)(["\n  grid-column: 1;\n  grid-row: 2;\n"]))),(0,B.ZP)("div")(u||(u=(0,P.Z)(['\n  width: 70%;\n  height: 10vh;\n  padding-top: 1rem;\n  border-radius: 16px;\n  box-shadow: 0px 4px 4px grey;\n  font-family: "Alkatra", cursive;\n  background-color: ',";\n  text-align: center;\n  margin-bottom: 4vh;\n  margin-top: 8vh;\n"])),(function(n){return n.theme.palette.secondary.main})),(0,B.ZP)("div")(p||(p=(0,P.Z)(["\n  width: 80%;\n  margin-left: 12vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2vh;\n\n  position: -webkit-sticky;\n  position: sticky;\n  align-self: start;\n  top: 1rem;\n  left: 1rem;\n  text-align: center;\n  @media (max-width: 750px) {\n  }\n"])))),on=(0,B.ZP)(Q.Z)(m||(m=(0,P.Z)(["\n  white-space: nowrap;\n  color: white;\n  -webkit-text-stroke-width: 1px;\n  -webkit-text-stroke-color: black;\n  justify-content: center;\n  align-items: center;\n  @media (max-width: 750px) {\n  }\n"]))),an=(0,B.ZP)("div")(f||(f=(0,P.Z)(["\n  margin: 0;\n  padding: 0;\n  width: 100vw;\n  height: 90vh;\n  @media (max-width: 750px) {\n    height: 60vh;\n  }\n"]))),rn=(0,B.ZP)("img")(x||(x=(0,P.Z)(["\n  width: 50vw;\n  height: 70vh;\n  @media (max-width: 750px) {\n    height: 50vh;\n  }\n"]))),sn=function(){return(0,A.jsx)(an,{children:(0,A.jsxs)(G.Z,(0,h.Z)((0,h.Z)({},{dots:!0,infinite:!0,speed:2e3,slidesToShow:2,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e3}),{},{children:[(0,A.jsx)("div",{children:(0,A.jsx)(rn,{src:N,alt:"YogaCarousel"})}),(0,A.jsx)("div",{children:(0,A.jsx)(rn,{src:Y,alt:"StrongWomenCarousel"})}),(0,A.jsx)("div",{children:(0,A.jsx)(rn,{src:U,alt:"DetenteCarousel"})}),(0,A.jsx)("div",{children:(0,A.jsx)(rn,{src:X,alt:"StripPlasticCarousel"})})]}))})},cn=function(){var n,e,t,i,o,a,r,s=(0,J.Ds)().enqueueSnackbar,c=(0,Z.useState)([{}]),d=(0,w.Z)(c,2),l=d[0],u=d[1],p=(0,Z.useState)({}),m=(0,w.Z)(p,2),f=m[0],x=m[1],P=(0,Z.useState)(0),B=(0,w.Z)(P,2),_=B[0],z=B[1],I=(0,Z.useState)([{}]),R=(0,w.Z)(I,2),E=R[0],V=R[1],G=(0,Z.useState)({}),N=(0,w.Z)(G,2),Y=N[0],U=N[1],X=(0,Z.useState)(0),Q=(0,w.Z)(X,2),an=Q[0],rn=Q[1],cn=(0,Z.useState)([{}]),dn=(0,w.Z)(cn,2),ln=dn[0],un=dn[1],pn=(0,Z.useState)(0),mn=(0,w.Z)(pn,2),fn=mn[0],xn=mn[1],hn=(0,Z.useState)(null),gn=(0,w.Z)(hn,2),vn=gn[0],wn=gn[1],Zn=localStorage.getItem("usrCourant"),bn=""!==Zn&&void 0!==Zn,jn=localStorage.getItem("salonCurant"),kn=function(){window.location.reload()},yn=function(n,e){s(e,{variant:"error"}),console.error(n)};(0,Z.useEffect)((function(){void 0!==jn&&0!==jn&&xn(jn-1)}),[]),(0,Z.useEffect)((function(){var n;!function(){(n=n||(0,v.Z)((0,g.Z)().mark((function n(){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.Z.get("salons").then((function(n){un(n.data.results[0])})).catch((function(n){yn(n,"Il n'y a pas de salons")}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}()}),[]);var Sn=function(e){return(n=n||(0,v.Z)((0,g.Z)().mark((function n(e){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.Z.get(e).then((function(n){var t=n.data.results[0];t&&("posts"===e?u(t):V(t))})).catch((function(n){console.error(n)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)};(0,Z.useEffect)((function(){Sn("posts")}),[fn]),(0,Z.useEffect)((function(){Sn("comments")}),[fn]),(0,Z.useEffect)((function(){x((0,h.Z)((0,h.Z)({},f),{},{time:K().toString(),id_salon:fn+1,id_user:Zn}))}),[fn]),(0,Z.useEffect)((function(){U((0,h.Z)((0,h.Z)({},Y),{},{time:K().toString(),id_user:Zn}))}),[fn]);var Cn=function(){return(e=e||(0,v.Z)((0,g.Z)().mark((function n(){var e,t,i,o;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=Math.trunc(6*Math.random()+1).toString(),i="image_time"+K().toString()+"salon"+fn.toString()+"user"+Zn+t,o=(0,F.iH)(H,"images/".concat(i)),(0,F.KV)(o,vn).then((function(n){return(e=e||(0,v.Z)((0,g.Z)().mark((function n(e){var t;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,F.Jt)(e.ref);case 2:t=n.sent,console.log("downloadURL "+t),""!==t&&void 0!==t&&(s("l'image a \xe9t\xe9 ajout\xe9 \xe0 la bdd",{variant:"success"}),console.log("comment?.id_post "+(null===Y||void 0===Y?void 0:Y.id_post)),setTimeout((function(){void 0!==(null===Y||void 0===Y?void 0:Y.id_post)&&0!==(null===Y||void 0===Y?void 0:Y.id_post)?U((0,h.Z)((0,h.Z)({},Y),{},{media:t})):x((0,h.Z)((0,h.Z)({},f),{},{media:t}))}),1e3));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)})).catch((function(n){yn(n,"l'image n'a pas \xe9t\xe9 ajout\xe9 \xe0 la bdd")}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)},Pn=function(){return(i=i||(0,v.Z)((0,g.Z)().mark((function n(){var e;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={data:f},n.next=3,T.Z.post("createpost",e).then((function(n){return z(n.data.results)})).catch((function(n){yn(n,"Le post n'a pas cr\xe9\xe9")}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)},Bn=function(){return(o=o||(0,v.Z)((0,g.Z)().mark((function n(){var e;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={data:Y},n.next=3,T.Z.post("createcomment",e).then((function(n){return rn(n.data.results)})).catch((function(n){yn(n,"Le comment n'a pas cr\xe9\xe9")}));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)};(0,Z.useEffect)((function(){_&&(kn(),s("Le post est cr\xe9\xe9 avec succ\xe8s",{variant:"success"}))}),[_]),(0,Z.useEffect)((function(){an&&(kn(),s("Le comment est cr\xe9\xe9 avec succ\xe8s",{variant:"success"}))}),[an]);return(0,A.jsxs)($,{children:[(0,A.jsx)(sn,{}),(0,A.jsx)(tn,{children:ln?ln.map((function(n,e){return(0,A.jsx)(D.ZP,{disablePadding:!0,sx:{width:"30vw"},children:(0,A.jsx)(on,{selected:fn===e,onClick:function(){return function(n,e){xn(e)}(0,e)},sx:{"&, &.Mui-selected":{backgroundColor:1===n.id?"colorRed.main":2===n.id?"secondary.main":"colorBlue.main",textAlign:"center",borderRadius:"10px"}},children:(0,A.jsx)(b.Z,{variant:"h3",children:n.salon})})},n.id)})):(0,A.jsx)(q.Z,{size:120})}),l?(0,A.jsx)(nn,{idSalon:fn+1,children:null===(r=l.filter((function(n){return n.id_salon===fn+1})))||void 0===r?void 0:r.map((function(n){return(0,A.jsxs)("div",{children:[(0,A.jsx)(W,{dataBlock:n,idSalon:fn+1},n.id),E?E.filter((function(e){return e.id_post===n.id})).map((function(n){return(0,A.jsx)(W,{dataBlock:n,idSalon:fn+1,isComment:!0},n.id)})):""]})}))}):(0,A.jsx)(q.Z,{}),(0,A.jsxs)(en,{idSalon:fn+1,children:[(0,A.jsx)(L.Z,{children:(0,A.jsx)(j.Z,{required:!0,id:"idPost",type:"text",sx:{width:{xs:"3vw",sm:"5vw",md:"5vw",lg:"10vw"},backgroundColor:"colorWhite.main",boxShadow:" 0px 8px 8px #566573  inset",ml:{xs:"2vw",sm:"2vw",md:"0vw",lg:"0vw"}},placeholder:"\u2116 de post",fullWidth:!0,onChange:function(n){var e;return U((0,h.Z)((0,h.Z)({},Y),{},{id_post:null===(e=n.target)||void 0===e?void 0:e.value}))}})}),(0,A.jsx)(L.Z,{children:(0,A.jsx)(y.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"45vw",borderRadius:"10px",backgroundColor:"colorWhite.main",boxShadow:" 0px 4px 4px gray inset"}},noValidate:!0,autoComplete:"off",children:(0,A.jsx)(j.Z,{required:!0,id:"message",type:"text",sx:{backgroundColor:"colorOrangeBlog.main",boxShadow:" 0px 8px 8px #566573  inset"},placeholder:"Ecrivez votre message...",fullWidth:!0,onChange:function(n){return function(n){var e,t;Y.id_post?U((0,h.Z)((0,h.Z)({},Y),{},{message:null===(e=n.target)||void 0===e?void 0:e.value})):x((0,h.Z)((0,h.Z)({},f),{},{message:null===(t=n.target)||void 0===t?void 0:t.value}))}(n)}})})}),(0,A.jsx)(j.Z,{variant:"outlined",type:"text",sx:{border:"none","& fieldset":{border:"none"},width:{xs:"20vw",md:"10vw"},textAlign:"left"},InputProps:{endAdornment:(0,A.jsxs)(M.Z,{component:"label",sx:{display:"flex",justifyContent:"start",fontSize:"4rem"},children:[(0,A.jsx)(S.Z,{fontSize:"inherit",sx:{color:"colorBlack.main",borderRadius:"50%",fontSize:{xs:"10vw",sm:"10vw",md:"8vw",lg:"4vw"},borderColor:"colorBlack.main"}}),(0,A.jsx)(L.Z,{children:(0,A.jsx)(O.Z,{style:{display:"none"},type:"file",hidden:!0,onChange:function(n){return(t=t||(0,v.Z)((0,g.Z)().mark((function n(e){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.target.files&&wn(e.target.files[0]);case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)},name:"fileImage"})})]})}}),(0,A.jsx)(k.Z,{name:"sendmessage",onClick:function(){return function(){return(a=a||(0,v.Z)((0,g.Z)().mark((function n(){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!bn){n.next=11;break}if(""===f.message&&""===Y.message&&!vn){n.next=8;break}if(!vn){n.next=5;break}return n.next=5,Cn();case 5:setTimeout((function(){console.log("fileImage "+vn),console.log("post.media "+f.media),console.log("comment.media "+Y.media),(vn&&(f.media||Y.media)||!vn)&&(null!==Y&&void 0!==Y&&Y.id_post?Bn():Pn())}),1500),n.next=9;break;case 8:return n.abrupt("return",(0,A.jsx)(q.Z,{size:120}));case 9:n.next=12;break;case 11:yn("Autorisation requise","Autorisation requise");case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}()},sx:{color:"colorOrangeBlog.main",borderRadius:"50px",width:"1vw",fontSize:{xs:"10vw",sm:"10vw",md:"8vw",lg:"4vw"}},children:(0,A.jsx)(C.Z,{fontSize:"inherit",className:"icon",sx:{color:"colorBlack.main",borderRadius:"50%"}})})]})]})}}}]);
//# sourceMappingURL=957.367acf24.chunk.js.map